/*!
  # Responsive Celendar widget script
  # by w3widgets
  #
  # Author: Lukasz Kokoszkiewicz
  #
  # Copyright Â© w3widgets 2013 All Rights Reserved
*/
(function(){!function(t){var n,a,e;return n=function(t,n){var a;return this.$element=t,this.options=n,this.weekDays=["sun","mon","tue","wed","thu","fri","sat","sun"],this.time=new Date,this.currentYear=this.time.getFullYear(),this.currentMonth=this.time.getMonth(),this.options.time&&(a=this.splitDateString(this.options.time),this.currentYear=a.year,this.currentMonth=a.month),this.initialDraw(),null},n.prototype={addLeadingZero:function(t){return 10>t?"0"+t:""+t},applyTransition:function(t,n){return t.css("transition",n),t.css("-ms-transition","-ms-"+n),t.css("-moz-transition","-moz-"+n),t.css("-webkit-transition","-webkit-"+n)},applyBackfaceVisibility:function(t){return t.css("backface-visibility","hidden"),t.css("-ms-backface-visibility","hidden"),t.css("-moz-backface-visibility","hidden"),t.css("-webkit-backface-visibility","hidden")},applyTransform:function(t,n){return t.css("transform",n),t.css("-ms-transform",n),t.css("-moz-transform",n),t.css("-webkit-transform",n)},splitDateString:function(t){var n,a,e,i;return e=t.split("-"),i=parseInt(e[0]),a=parseInt(e[1]-1),n=parseInt(e[2]),e={year:i,month:a,day:n}},initialDraw:function(){return this.drawDays(this.currentYear,this.currentMonth)},editDays:function(t){var n,a,e,i,r;r=[];for(n in t)e=t[n],this.options.events[n]=t[n],i=this.splitDateString(n),a=this.$element.find('[data-year="'+i.year+'"][data-month="'+(i.month+1)+'"][data-day="'+i.day+'"]').parent(".day"),a.removeClass("active"),a.find(".badge").remove(),a.find("a").removeAttr("href"),this.currentMonth===i.month||this.options.activateNonCurrentMonths?r.push(this.makeActive(a,e)):r.push(void 0);return r},clearDays:function(t){var n,a,e,i,r,s;for(s=[],i=0,r=t.length;r>i;i++)n=t[i],delete this.options.events[n],e=this.splitDateString(n),a=this.$element.find('[data-year="'+e.year+'"][data-month="'+(e.month+1)+'"][data-day="'+e.day+'"]').parent(".day"),a.removeClass("active"),a.find(".badge").remove(),s.push(a.find("a").removeAttr("href"));return s},clearAll:function(){var n,a,e,i,r,s;for(this.options.events={},a=this.$element.find('[data-group="days"] .day'),s=[],e=i=0,r=a.length;r>i;e=++i)n=a[e],t(n).removeClass("active"),t(n).find(".badge").remove(),s.push(t(n).find("a").removeAttr("href"));return s},setMonth:function(t){var n;return n=this.splitDateString(t),this.currentMonth=this.drawDays(n.year,n.month)},prev:function(){return this.currentMonth-1<0?(this.currentYear=this.currentYear-1,this.currentMonth=11):this.currentMonth=this.currentMonth-1,this.drawDays(this.currentYear,this.currentMonth),this.options.onMonthChange&&this.options.onMonthChange.call(this),null},next:function(){return this.currentMonth+1>11?(this.currentYear=this.currentYear+1,this.currentMonth=0):this.currentMonth=this.currentMonth+1,this.drawDays(this.currentYear,this.currentMonth),this.options.onMonthChange&&this.options.onMonthChange.call(this),null},curr:function(){return this.currentYear=this.time.getFullYear(),this.currentMonth=this.time.getMonth(),this.drawDays(this.currentYear,this.currentMonth),this.options.onMonthChange&&this.options.onMonthChange.call(this),null},addOthers:function(n,a){var e;return"object"==typeof a&&(null!=a.number&&(e=t("<span></span>").html(a.number).addClass("badge"),null!=a.badgeClass&&e.addClass(a.badgeClass),n.append(e)),a.url&&n.find("a").attr("href",a.url)),n},makeActive:function(t,n){var a,e,i,r,s;if(n){if(n["class"])for(a=n["class"].split(" "),i=r=0,s=a.length;s>r;i=++r)e=a[i],t.addClass(e);else t.addClass("active");t=this.addOthers(t,n)}return t},getDaysInMonth:function(t,n){return new Date(t,n+1,0).getDate()},drawDay:function(n,a,e,i,r){var s,o,h,d,l,u;return d=t("<div></div>").addClass("day"),o=new Date,o.setHours(0,0,0,0),l=new Date(a,e-1,i),u=l.getTime()<o.getTime()?"past":l.getTime()===o.getTime()?"today":"future",d.addClass(this.weekDays[r%7]),d.addClass(u),h=a+"-"+this.addLeadingZero(e)+"-"+this.addLeadingZero(i),(0>=i||i>n)&&(s=new Date(a,e-1,i),i=s.getDate(),e=s.getMonth()+1,a=s.getFullYear(),d.addClass("not-current").addClass(u),this.options.activateNonCurrentMonths&&(h=a+"-"+this.addLeadingZero(e)+"-"+this.addLeadingZero(i))),d.append(t("<a>"+i+"</a>").attr("data-day",i).attr("data-month",e).attr("data-year",a)),this.options.monthChangeAnimation&&(this.applyTransform(d,"rotateY(180deg)"),this.applyBackfaceVisibility(d)),d=this.makeActive(d,this.options.events[h]),this.$element.find('[data-group="days"]').append(d)},drawDays:function(n,a){var e,i,r,s,o,h,d,l,u,c,p,m,y,f,v,g,D,M;if(y=this,f=new Date(n,a),e=f.getMonth(),p=f.getMonth()+1,g=f.getFullYear(),f.setDate(1),d=this.options.startFromSunday?f.getDay()+1:f.getDay()||7,u=this.getDaysInMonth(n,a),v=0,this.options.monthChangeAnimation)for(s=this.$element.find('[data-group="days"] .day'),l=D=0,M=s.length;M>D;l=++D)i=s[l],o=.01*l,this.applyTransition(t(i),"transform .2s ease "+o+"s"),this.applyTransform(t(i),"rotateY(180deg)"),this.applyBackfaceVisibility(t(i)),v=1e3*(o+.1);return r=2,this.options.allRows?c=42:(m=Math.ceil((d-(r-1)+u)/7),c=7*m),this.$element.find("[data-head-year]").html(f.getFullYear()),this.$element.find("[data-head-month]").html(this.options.translateMonths[f.getMonth()]),h=function(){var n,a;for(y.$element.find('[data-group="days"]').empty(),n=r-d,l=y.options.startFromSunday?0:1;c-d+r>n;)y.drawDay(u,g,p,n,l),n+=1,l+=1;return a=function(){var n,a;for(s=y.$element.find('[data-group="days"] .day'),l=n=0,a=s.length;a>n;l=++n)i=s[l],y.applyTransition(t(i),"transform .2s ease "+.02*l+"s"),y.applyTransform(t(i),"rotateY(0deg)");return y.options.onDayClick&&y.$element.find('[data-group="days"] .day a').click(function(){return y.options.onDayClick.call(this,y.options.events)}),y.options.onDayHover&&y.$element.find('[data-group="days"] .day a').hover(function(){return y.options.onDayHover.call(this,y.options.events)}),y.options.onActiveDayClick&&y.$element.find('[data-group="days"] .day.active a').click(function(){return y.options.onActiveDayClick.call(this,y.options.events)}),y.options.onActiveDayHover?y.$element.find('[data-group="days"] .day.active a').hover(function(){return y.options.onActiveDayHover.call(this,y.options.events)}):void 0},setTimeout(a,0)},setTimeout(h,v),e}},t.fn.responsiveCalendar=function(a,e){var i,r,s;return r=t.extend({},t.fn.responsiveCalendar.defaults,"object"==typeof a&&a),s={next:"next",prev:"prev",edit:"editDays",clear:"clearDays",clearAll:"clearAll",getYearMonth:"getYearMonth",jump:"jump",curr:"curr"},i=function(a){var e;return r=t.metadata?t.extend({},r,a.metadata()):r,a.data("calendar",e=new n(a,r)),r.onInit&&r.onInit.call(e),a.find("[data-go]").click(function(){return"prev"===t(this).data("go")&&e.prev(),"next"===t(this).data("go")?e.next():void 0})},this.each(function(){var n,r;return n=t(this),r=n.data("calendar"),r?"string"==typeof a?null!=s[a]?r[s[a]](e):r.setMonth(a):"number"==typeof a&&r.jump(Math.abs(a)+1):i(n),null})},t.fn.responsiveCalendar.defaults={translateMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sepr","Oct","Nov","Dec"],events:{},time:void 0,allRows:!0,startFromSunday:!1,activateNonCurrentMonths:!1,monthChangeAnimation:!0,onInit:void 0,onDayClick:void 0,onDayHover:void 0,onActiveDayClick:void 0,onActiveDayHover:void 0,onMonthChange:void 0},e=t('[data-spy="responsive-calendar"]'),e.length?(a={},null!=e.data("translate-months")&&(a.translateMonths=e.data("translate-months").split(",")),null!=e.data("time")&&(a.time=e.data("time")),null!=e.data("all-rows")&&(a.allRows=e.data("all-rows")),null!=e.data("start-from-sunday")&&(a.startFromSunday=e.data("start-from-sunday")),null!=e.data("activate-non-current-months")&&(a.activateNonCurrentMonths=e.data("activate-non-current-months")),null!=e.data("month-change-animation")&&(a.monthChangeAnimation=e.data("month-change-animation")),e.responsiveCalendar(a)):void 0}(jQuery)}).call(this);